Domain: 3D box with open boundaries; AMR or nested grids recommended.
Discretization:
• Γ: finite‑difference or spectral on AMR; time‑integrator leapfrog/Verlet or RK with CFL control.
• Gravity: multigrid Poisson solver each step.
• Gas: shock‑capturing (HLLC/Roe) finite‑volume scheme; γ=5/3.

Tolerances & checks:
• Energy conservation error < 1% pre‑ and post‑pericenter (excluding shocks’ numerical dissipation).
• Poisson residual < 1e‑6 per V‑cycle.
• Convergence under refinement by factor 2 → Δ(Δx)/Δx < 5%.