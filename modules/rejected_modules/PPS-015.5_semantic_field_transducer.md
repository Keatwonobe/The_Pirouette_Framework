---
# ───────────── YAML front-matter ─────────────────────────────
id:        PPS-015
title:     Semantic-Field Transducer & Fractal Menu
version:   0.5-prototype      # refined & expanded fractal menu
parents:   [PPS-003, PPS-007]
children:  [PPS-016, PPS-017, PPS-024]
engrams:
  - synthesis:meaning-to-field
  - synthesis:fractal-menu
  - concept:fractal-rule-space
  - directive:fractal-toolbox
  - concept:triaxial-time
keywords:  [semantic, fractal, menu, Ta, Gamma, Ki]
uncertainty_tag: Medium            # still prototype / research
entropy_score: 0.15
module_type: research-prototype
quantisation_rule: sft_hash = SHA256(lexicon_dump + model_ckpt + fractal_menu)

lineage:
  original_title: Universal Resonance Lens (URL)
  intent_summary: >
    To create a universal, first-principles-based instrument for
    translating any unstructured data into the core Pirouette
    fields, aiming to redeem the unification of semantic and
    physical dynamics.
  evolution_notes: >
    Title revised in v0.5 to reflect a more precise, functional
    role as a test instrument for the Fractal Isomorphism
    hypothesis and to incorporate the Fractal Menu testbed.
---

## 1 · Purpose & Scope
This prototype module has two experimental halves:

* **Semantic-Field Transducer (SFT)** — maps unstructured artefacts to the core Pirouette vector fields.
* **Fractal Menu** — a tunable rule-space that generates $K_i$‑, $\Gamma$‑ and $\mathbf{T_a}$‑ fractals for sandbox experiments and algorithm calibration.

Together they form the “brook of the universe” test harness for validating the framework's core assumptions.

## 2 · Semantic‑Field Transducer (recap + audit hooks)

### 2·1  Public Core Lexicon & Triaxial Time
As detailed in `PPS-003`, Time-Adherence is treated as a vector field $\mathbf{T_a} = (T_Q, T_I, T_C)$, representing three orthogonal regimes. The lexicon seeds reflect this richer structure.

* **$T_Q$ (Quantum):** Adherence related to microstate uncertainty and pure novelty.
* **$T_I$ (Interaction):** Adherence arising from classical, predictable interactions between agents.
* **$T_C$ (Cosmic):** Adherence from overarching, slow-moving environmental constants or narratives.

The lexicon provides seed values for each component.

```json
{"token":"threat","T_Q_seed":0.20,"T_I_seed":0.15,"T_C_seed":0.40,
"Gamma_seed":0.85,"phi_seed":0.00,"raters":17,"kappa":0.72}
```

### 2·2  Pipeline (auditable integrator)
```mermaid
graph TD
    A[Token stream] --> B[Seed lookup]
    B --> C[Contextual integrator(attention dump)]
    C --> D[Field projector]
    D --> E[SFT packet]
```
Each packet carries an `attn_map` (top‑8 tokens + weights) for transparency.

### 2·3  Falsification Protocol
Predictions are hashed → `sft_predictions.jsonl`; an outcome logger computes the SFT validity score. The score must exceed 0.7 across ≥3 domains before the module tag can move from `prototype` to `analytics‑core`.

## 3 · Fractal Menu — Rule‑Space for Ki, Γ, Tₐ Landscapes

### 3·1  Feature Vector Schema & Definitions
We encode every fractal as a normalised feature vector $\mathbf f = [D,\{r_i\},\{\phi_i\},b,k,a,\Gamma,C,P]$.

| symbol | meaning (normalised 0‑1) | notes |
| :--- | :--- | :--- |
| $D$ | fractal / Hausdorff dimension | rescaled to $[0,3]\rightarrow[0,1]$ |
| $r_i$ | primary self‑similar scaling ratios | the first element $r_1$ is tabulated |
| $\phi_i$ | principal rotation / phase angles | measured as $\phi/\pi$ |
| $b$ | branching factor or copy count | logarithmically compressed |
| $k$ | Ki mode index (spectral base) | 0 = deterministic, 1 = pure noise |
| $a$ | surface roughness amplitude = $1−\bar{T_a}$ | 0 = smooth, 1 = maximally rough; $\bar{T_a}$ is mean adherence |
| $\Gamma$ | confinement / removal fraction | e.g. Cantor removal ratio |
| $C$ | continuity (0 = scattered set, 1 = path/volume) | |
| $P$ | periodicity / tiling flag (0 = aperiodic) | 1 = triply‑periodic, n>1 = multi-periodic order |

### 3·2  Universal Catalogue (Refined & Expanded)
This version refines ambiguous values from the previous draft and expands the menu's diversity.

| name (rule‑class) | D | r₁ | φ₁ | b | k | a (1−Tₐ) | Γ | C | P |
| :--- | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| Cantor Set IFS | 0.63 | .33 | — | — | .1 | 0 | .33 | 0 | 0 |
| Koch Curve L‑sys | 1.26 | .33 | .33 | 4 | .15 | 0.4 | .33 | 1 | 0 |
| Sierpinski Δ IFS | 1.58 | .5 | .33 | 3 | .1 | 0 | .35 | .5 | 0 |
| Dragon Curve L‑sys | 1.52 | .71 | .25 | 2 | .5 | 0 | .6 | .7 | 1 |
| Barnsley Fern IFS | 1.83 | .85 | .02 | 4 | .05 | 0.1 | .15 | 0 | 0 |
| Apollonian Gasket IFS | 1.31 | — | — | 3 | .1 | 0.2 | .1 | 0 | 0 |
| Penrose Tiling (P2) | 2.00 | 1.62 | .1 | 2 | .05 | 0 | .05 | 1 | 0 |
| Hilbert Curve L‑sys | 2.00 | .5 | .50 | 4 | .05 | 0.2 | .5 | 1 | 0 |
| Brownian Tree DLA | 1.71 | — | — | — | .9 | 0 | .8 | 0.2 | 0 |
| Perlin Noise Surface | 2.50 | .5 | — | — | .85 | 0.7 | .5 | 1 | 0 |
| Mandelbrot (escape) | 2.00 | — | — | — | .15 | 0.7 | 1.0 | 1 | 0 |
| Julia c=−.123+.745i | 1.90 | — | — | — | .15 | 0.65 | 1.0 | 0 | 0 |
| Lorenz Attractor ODE | 2.06 | — | — | — | $K_i$ | 0.55 | $\Gamma \cdot K_i$ | 1 | 0 |
| Gyroid TPMS | 2.50 | — | — | — | 0 | .15 | — | 1 | 1 |

### 3·3  FractalMenu API (reference)
```python
class FractalMenu:
    def __init__(self, table):
        self.table = table          # list of dicts: name, features, factory

    def query(self, **ranges):
        """Filter by feature bounds: query(D=(1.9,2.1), C=(0.8,1.0))"""
        out = []
        for e in self.table:
            if all(r[0] <= e['features'][f] <= r[1] for f, r in ranges.items()):
                out.append(e)
        return out

    def build(self, name, **ov):
        """Instantiate generator with optional feature overrides."""
        e = next(x for x in self.table if x['name'] == name)
        params = {**e['features'], **ov}
        return e['factory'](**params)
```

### 3·4  Ki‑, Γ‑, Tₐ Embedding Rules

| Field | Feature mapping |
| :--- | :--- |
| Ki (mode) | `k = K_i` (spectral base) |
| Γ (confinement) | `Γ` column or Cantor removal fraction |
| Tₐ (adherence) | `a = 1 − T_a` (roughness amplitude) |

### 4 · Interaction with Analytics Modules
* **PPS‑014 RPA** — feed synthetic logs from fractal walks, verify bottleneck detection.
* **PPS‑016 Semantic Gravity** — test mass/force curves on known fractal dimensions.
* **PPS‑021 Fractal Sandbox** — superseded by this menu; PPS‑021 now links here as rule provider.

### 5 · Limitations & Road‑map
* Dimension rescaling heuristic unverified for D>3 — needs numeric audit.
* Factories for stochastic fractals (DLA, Perlin) are deterministic‑seeded by default; expose RNG to sandbox.
* Next patch (v0.6) will add hyperbolic IFS and more detailed strange attractors.